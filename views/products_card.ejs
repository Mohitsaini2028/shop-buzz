

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>



<link rel="stylesheet" href="/css/card.css" />

<div class="container mt-5">

    <div class="row">

    <% if (products && products.length>0) { %>

        <% products.forEach(function(p){ %>    

                <div class="col-md-4">      
                
                <div class="card mr-2">
                    
                    <div class="image-container">
                        
                        <div class="first">
                            
                            <div class="d-flex justify-content-between align-items-center">
                                
                                <span class="discount"> <%= (100 * (Number(p.originalPrice) - Number(p.discountedPrice))/Number(p.originalPrice)).toFixed(0) %> %</span>                                
                            </div>
                        </div>

                        <a href="/products/<%= p.category %>/<%= p.slug %>"><img src="/product_images/<%= p.id %>/<%= p.image %>"  width="80%" style="max-height:160px;" class="img-fluid align-items p-2 rounded thumbnail-image">
                    </a>
                    </div>
                    
                    
                    <div class="product-detail-container p-2">
                        
                        <div class="d-flex justify-content-between">
                            
                            <a href="/products/<%= p.category %>/<%= p.slug %>"><h5 class="dress-name"><%= p.title.slice(0, 25) %> </h5></a>

                            <div class="d-flex flex-column mb-2">
                                
                                <span class="new-price">Rs.<%= parseFloat(p.discountedPrice).toFixed(2) %></span>
                                <small class="old-price text-right">Rs.<%= parseFloat(p.originalPrice).toFixed(2) %></small>
                            </div>
                            
                        </div>
                            
                            <div class="d-flex justify-content-between align-items-center pt-1">
                                <div>
                                    <span class="rating-number"><%= p.rating %> <i class="fa-solid fa-star"></i></span>
                                </div>
                                
                                <span class="buy"><a class="bg-dark text-decoration-none text-warning p-2 rounded" href="/cart/add/<%= p.slug %>">Add to cart 
                                </a></span>
                                
                                

                            </div>                       

                        </div>
                    
                    </div>
                    
            <a href="/products/<%= p.category %>/<%= p.slug %>">    
                <div class="mt-3">
                    <div class="card voutchers">
                        
                        <div class="voutcher-divider">
                            <div class="voutcher-left text-center">
                                <span class="voutcher-name"><%= p.category.toUpperCase() %></span>
                                <h5 class="voutcher-code">#<%= p.subCategory %></h5>   
                            </div>
                            <div class="voutcher-right text-center border-left">
                                <h5 class="discount-percent"> <%= (100 * (Number(p.originalPrice) - Number(p.discountedPrice))/Number(p.originalPrice)).toFixed(0) %>%</h5>
                                <span class="off">Off</span>  
                            </div>          
                        </div>   
                    </div>
                </div>
            </a>
            
        </div>
        <% }); %>

    <%} else {%>
        <h4 class="ml-5">Sorry no product to display</h4>     
    <% }; %>
    </div>

</div>

</div>

</div>

</div>
            
<%- include('_layouts/footer.ejs'); %>

